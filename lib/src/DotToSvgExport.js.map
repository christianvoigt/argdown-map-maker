{"version":3,"sources":["../../src/DotToSvgExport.js"],"names":["_","DotToSvgExport","config","name","defaults","defaultsDeep","format","request","dotToSvg","getSettings","response","dot","svg","module","exports"],"mappings":";;;;AAAA;;;;AACA;;IAAYA,C;;;;;;;;IAENC,c;AACF,4BAAYC,MAAZ,EAAoB;AAAA;;AAChB,aAAKC,IAAL,GAAY,gBAAZ;AACA,aAAKC,QAAL,GAAgBJ,EAAEK,YAAF,CAAe,EAAf,EAAmBH,MAAnB,EAA2B;AACvCI,oBAAQ;AAD+B,SAA3B,CAAhB;AAGA,aAAKJ,MAAL,GAAcA,MAAd;AACH;;;;oCACWK,O,EAAS;AACjB,gBAAIA,QAAQC,QAAZ,EAAsB;AAClB,uBAAOD,QAAQC,QAAf;AACH,aAFD,MAEO,IAAID,QAAQN,cAAZ,EAA4B;AAC/B,uBAAOM,QAAQN,cAAf;AACH,aAFM,MAEA;AACHM,wBAAQC,QAAR,GAAmB,EAAnB;AACA,uBAAOD,QAAQC,QAAf;AACH;AACJ;;;gCACOD,O,EAAS;AACbP,cAAEK,YAAF,CAAe,KAAKI,WAAL,CAAiBF,OAAjB,CAAf,EAA0C,KAAKH,QAA/C;AACH;;;4BACGG,O,EAASG,Q,EAAU;AACnB,gBAAI,CAACA,SAASC,GAAd,EAAmB;AACf,uBAAOD,QAAP;AACH;AACDA,qBAASE,GAAT,GAAe,mBAAIF,SAASC,GAAb,EAAkB,KAAKF,WAAL,CAAiBF,OAAjB,CAAlB,CAAf;AACA,mBAAOG,QAAP;AACH;;;;;;AAELG,OAAOC,OAAP,GAAiB;AACbb,oBAAgBA;AADH,CAAjB","file":"DotToSvgExport.js","sourcesContent":["import Viz from \"viz.js\";\nimport * as _ from \"lodash\";\n\nclass DotToSvgExport {\n    constructor(config) {\n        this.name = \"DotToSvgExport\";\n        this.defaults = _.defaultsDeep({}, config, {\n            format: \"svg\"\n        });\n        this.config = config;\n    }\n    getSettings(request) {\n        if (request.dotToSvg) {\n            return request.dotToSvg;\n        } else if (request.DotToSvgExport) {\n            return request.DotToSvgExport;\n        } else {\n            request.dotToSvg = {};\n            return request.dotToSvg;\n        }\n    }\n    prepare(request) {\n        _.defaultsDeep(this.getSettings(request), this.defaults);\n    }\n    run(request, response) {\n        if (!response.dot) {\n            return response;\n        }\n        response.svg = Viz(response.dot, this.getSettings(request));\n        return response;\n    }\n}\nmodule.exports = {\n    DotToSvgExport: DotToSvgExport\n};\n"]}